---
description: Application tech stack, dependency versions, and best practices
globs: **/*
alwaysApply: true
---

# Tech Stack & Dependencies

This document outlines the application's technology stack, dependency versions, and best practices for each.

## Core Framework

### React 19.2.0

**Version**: `^19.2.0` (latest stable)

**Key Features & Best Practices**:
- **React Compiler**: React 19 includes automatic optimizations - prefer letting React handle memoization
- **Actions**: Use Server/Client Actions for form handling and mutations
- **useFormStatus**: Use for form state management in async operations
- **useOptimistic**: Implement optimistic UI updates for better UX
- **Ref as a Prop**: Refs can now be passed as regular props (no `forwardRef` needed in many cases)
- **Async Components**: Support for async/await in components and Suspense boundaries
- **Document Metadata**: Built-in support for `<title>`, `<meta>`, etc. in components

**Migration Notes**:
- `ref` is now a regular prop (no `forwardRef` wrapper needed)
- Context `value` prop is now required (no default `undefined`)
- `useFormStatus` replaces manual form state tracking
- Prefer Actions over manual `fetch` in event handlers

```typescript
// Good: Using Actions
async function handleSubmit(formData: FormData) {
  'use server';
  await updateUser(formData);
}

// Good: Using useOptimistic
const [optimisticState, addOptimistic] = useOptimistic(
  state,
  (current, newItem) => [...current, newItem]
);
```

### React DOM 19.2.0

**Version**: `^19.2.0`

- Must match React version exactly
- Includes hydration improvements and better error boundaries

## Routing

### React Router DOM 7.9.6

**Version**: `^7.9.6` (latest)

**Best Practices**:
- Use `createBrowserRouter` for modern routing setup
- Leverage `loader` and `action` functions for data fetching
- Use `useLoaderData` and `useActionData` hooks
- Implement error boundaries with `errorElement`
- Prefer route-level code splitting with `lazy()`

```typescript
// Good: Modern React Router setup
const router = createBrowserRouter([
  {
    path: '/',
    element: <Home />,
    loader: homeLoader,
    errorElement: <ErrorBoundary />,
  },
]);
```

## Styling

### Styled Components 6.1.19

**Version**: `^6.1.19` (latest)

**Best Practices**:
- Use TypeScript with `styled-components` for type safety
- Prefer `css` helper for complex styles
- Use theme provider for consistent design tokens
- Leverage `attrs` for dynamic props efficiently
- Avoid inline style objects - use styled components or `css` helper

```typescript
// Good: Typed styled component
const Button = styled.button<{ $primary?: boolean }>`
  background: ${props => props.$primary ? 'blue' : 'gray'};
`;

// Good: Using css helper
const complexStyles = css`
  ${Button} {
    margin: 1rem;
  }
`;
```

**Performance Notes**:
- Styled Components v6 has improved performance
- Use `$` prefix for transient props (won't be passed to DOM)
- Consider `babel-plugin-styled-components` for better dev experience

## Animation

### GSAP 3.13.0

**Version**: `^3.13.0` (latest stable)

**Best Practices**:
- Register plugins: `gsap.registerPlugin(SplitText, ScrollTrigger)`
- Use `useGSAP` hook from `@gsap/react` for React integration
- Clean up animations in `useEffect` return or `useGSAP` cleanup
- Prefer `gsap.context()` for scoped animations and easier cleanup
- Use `will-change` CSS property sparingly (GSAP handles it)

```typescript
// Good: Using useGSAP hook
useGSAP(() => {
  gsap.to('.element', { x: 100, duration: 1 });
}, { scope: containerRef });
```

**Performance**:
- Batch DOM reads/writes
- Use `transform` and `opacity` for animations (GPU accelerated)
- Avoid animating layout properties (width, height, top, left)

### @gsap/react 2.1.2

**Version**: `^2.1.2`

- Official React integration for GSAP
- Provides `useGSAP` hook with automatic cleanup
- Always use this instead of manual GSAP in React components

### Lenis 1.3.15

**Version**: `^1.3.15` (latest)

**Best Practices**:
- Initialize Lenis in `useEffect` or `useGSAP`
- Sync with GSAP using `lenis.raf(time)` in GSAP ticker
- Clean up on unmount: `lenis.destroy()`
- Configure options for performance (e.g., `duration`, `easing`)

```typescript
// Good: Lenis setup with GSAP
useGSAP(() => {
  const lenis = new Lenis();
  
  function raf(time: number) {
    lenis.raf(time);
    requestAnimationFrame(raf);
  }
  requestAnimationFrame(raf);
  
  return () => lenis.destroy();
}, []);
```

## Build Tools

### Vite 7.2.2

**Version**: `^7.2.2` (latest)

**Best Practices**:
- Use `@vitejs/plugin-react-swc` for faster builds (already configured)
- Leverage Vite's built-in CSS handling
- Use environment variables with `import.meta.env`
- Configure path aliases in `vite.config.ts` for cleaner imports
- Enable source maps in development

**Performance**:
- Vite 7 includes improved HMR performance
- Use dynamic imports for code splitting
- Leverage Vite's automatic dependency pre-bundling

### TypeScript 5.9.3

**Version**: `~5.9.3`

**Best Practices**:
- Use strict mode in `tsconfig.json`
- Enable `noUncheckedIndexedAccess` for safer array/object access
- Use `satisfies` operator for type inference with constraints
- Prefer `interface` for object shapes, `type` for unions/intersections
- Use `as const` for literal types

**Configuration**:
- `tsconfig.app.json` - Application code
- `tsconfig.node.json` - Build tools (Vite config)
- Keep `skipLibCheck: true` for faster compilation

## Code Quality

### ESLint 9.39.1

**Version**: `^9.39.1` (flat config format)

**Best Practices**:
- Uses new flat config format (`eslint.config.js`)
- Configured with `typescript-eslint` and React plugins
- Run `npm run lint` before commits
- Fix auto-fixable issues: `npm run lint -- --fix`

**Plugins**:
- `eslint-plugin-react-hooks` - Enforces Rules of Hooks
- `eslint-plugin-react-refresh` - Prevents issues with Fast Refresh

## Dependency Management

### Version Strategy

- **Production dependencies**: Use `^` (caret) for minor/patch updates
- **Dev dependencies**: Use `^` for flexibility
- **TypeScript**: Use `~` (tilde) for patch-only updates (more conservative)

### Security & Updates

- Run `npm audit` regularly
- Update dependencies incrementally
- Test thoroughly after major version updates
- Keep `package-lock.json` committed for reproducible builds

### Key Dependencies Summary

| Package | Version | Purpose |
|---------|---------|---------|
| react | ^19.2.0 | UI framework |
| react-dom | ^19.2.0 | React DOM renderer |
| react-router-dom | ^7.9.6 | Client-side routing |
| styled-components | ^6.1.19 | CSS-in-JS styling |
| gsap | ^3.13.0 | Animation library |
| @gsap/react | ^2.1.2 | GSAP React integration |
| lenis | ^1.3.15 | Smooth scrolling |
| vite | ^7.2.2 | Build tool & dev server |
| typescript | ~5.9.3 | Type safety |
| eslint | ^9.39.1 | Code linting |

## Important Notes

1. **React 19 Compatibility**: Ensure all third-party libraries support React 19 before upgrading
2. **React Router v7**: Uses new data APIs (loaders/actions) - migrate from older patterns
3. **GSAP + React**: Always use `useGSAP` hook, never call GSAP directly in render
4. **Styled Components v6**: Breaking changes from v5 - check migration guide if upgrading
5. **Vite 7**: Fast refresh and HMR work seamlessly with React 19

## Scripts Reference

- `npm run dev` - Start development server (Vite)
- `npm run build` - Production build (TypeScript + Vite)
- `npm run lint` - Run ESLint
- `npm run preview` - Preview production build